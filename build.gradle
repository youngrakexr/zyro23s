buildscript {
	ext {
		grailsVersion = "4.0.0.M1"
	}
	repositories {
		mavenLocal()
		maven { url "http://repo.grails.org/grails/core" }
	}
	dependencies {
		classpath "com.bertramlabs.plugins:asset-pipeline-gradle:3.0.7"
		classpath "org.grails:grails-gradle-plugin:${grailsVersion}"
	}
}

version "2.5.0.M1"
group "org.grails.plugins"

apply plugin: "idea"
apply plugin: "java-library"
apply plugin: "org.grails.grails-plugin"
apply plugin: "org.grails.grails-plugin-publish"
apply plugin: "com.bertramlabs.asset-pipeline"

sourceCompatibility = 1.8

repositories {
	mavenLocal()
	maven { url "http://repo.grails.org/grails/core" }
}

dependencies {
	implementation "javax.servlet:javax.servlet-api"
	implementation "org.grails:grails-plugin-controllers"

	api "com.fasterxml.jackson.core:jackson-databind:2.9.8"
	api "org.springframework:spring-messaging:5.1.5.RELEASE"
	api "org.springframework:spring-websocket:5.1.5.RELEASE"
}

bootJar.enabled = false

assets.packagePlugin = true

publishing {
	publications.first().pom.withXml {
		asNode().dependencies.dependency.exclusions*.replaceNode {}
	}
}

grailsPublish {
	user = project.properties.bintrayUser ?: "."
	key = project.properties.bintrayKey ?: "."
	githubSlug = "zyro23/grails-spring-websocket"
	repo = "maven"
	license = "Apache-2.0"
	developers = [zyro: "zyro"]
}

wrapper.gradleVersion = "5.1.1"
